{"version":3,"sources":["assets\\src\\scenes\\hall\\HallScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { G } from \"../../G\";\nimport { JoinRoomEvent } from \"../../events/JoinRoomEvent\";\nimport { JoinRoomPanel } from \"./JoinRoomPanel\";\nimport { CreateRoomPanel } from \"./CreateRoomPanel\";\nimport { CreateRoomEvent } from \"../../events/CreateRoomEvent\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class HallScene extends cc.Component {\n\n    @property(cc.Label)\n    private usernameLabel: cc.Label = null;\n    @property(cc.Sprite)\n    private userHeadSprite: cc.Sprite = null;\n    @property(cc.Label)\n    private messageLabel: cc.Label = null;\n    @property(cc.EditBox)\n    private enterRoomInputBox: cc.EditBox = null;\n    @property(cc.Button)\n    private enterRoomButton: cc.Button = null;\n    @property(cc.Button)\n    private returnButton: cc.Button = null;\n    @property(cc.Label)\n    private roomInfoLabel: cc.Label = null;\n\n    @property(cc.Button)\n    private createRoomButton: cc.Button = null;\n    @property(CreateRoomPanel)\n    private createRoomPanel: CreateRoomPanel = null;\n    @property(cc.Button)\n    private joinRoomButton: cc.Button = null;\n    @property(JoinRoomPanel)\n    private joinRoomPanel: JoinRoomPanel = null;\n    @property(cc.Button)\n    private matchButton: cc.Button = null;\n\n    protected start() {\n        this.usernameLabel.string = G.user.getUsername();\n        this.userHeadSprite.spriteFrame = G.user.getUserHead();\n        this.addListeners();\n        G.ws.emit(\"hall\");\n    }\n\n    onBtnCreateRoom() {\n        this.createRoomPanel.show();\n    }\n\n    onEventCreateRoom(event: CreateRoomEvent) {\n        G.gameRoot.showMaskMessage(\"正在创建房间\");\n        G.ws.emit(\"create\", { seatSum: event.seatSum, gameSum: event.gameSum });\n    }\n\n    onWsCreateRoom(data) {\n        G.gameRoot.showMaskMessage(\"创建房间成功，正在进入房间\");\n        G.ws.emit(\"enter\", { rid: data.rid });\n    }\n\n    onBtnJoinRoom() {\n        this.joinRoomPanel.show();\n    }\n\n    onEventJoinRoom(event: JoinRoomEvent) {\n        G.gameRoot.showMaskMessage(\"正在进入房间\");\n        G.ws.emit(\"enter\", { rid: event.roomNum });\n    }\n\n    onWsEnterRoom(data) {\n        G.gameRoot.hideMaskMessage();\n        G.onEnterRoom(data);\n    }\n\n    onBtnReturn() {\n        G.onHallExit();\n    }\n\n    onBtnEnterRoom() {\n        let rid = +this.enterRoomInputBox.string;\n        G.ws.emit(\"enter\", { rid: rid });\n    }\n\n    onBtnMatchRoom() {\n        G.ws.emit(\"match\");\n    }\n\n    onWsHallMessage(data: string) {\n        this.messageLabel.string = data;\n    }\n\n    // onWsHallInfo(data) {\n    //     this.roomInfoLabel.string = \"\";\n    //     data.roomlist.forEach((room, i) => {\n    //         this.roomInfoLabel.string += `${room.rid} (${room.num}/${room.max})` + \"\\n\";\n    //     });\n    // }\n\n    onWsError(data) {\n        G.gameRoot.hideMaskMessage();\n        G.gameRoot.showTip(data);\n    }\n\n    onDestroy() {\n        this.removeListeners();\n    }\n\n    addListeners() {\n        this.joinRoomButton.node.on(cc.Node.EventType.TOUCH_END, this.onBtnJoinRoom, this);\n        this.createRoomButton.node.on(cc.Node.EventType.TOUCH_END, this.onBtnCreateRoom, this);\n        this.matchButton.node.on(cc.Node.EventType.TOUCH_END, this.onBtnMatchRoom, this);\n        G.on(JoinRoomEvent.NAME, this.onEventJoinRoom, this);\n        G.on(CreateRoomEvent.NAME, this.onEventCreateRoom, this);\n\n        this.returnButton.node.on(cc.Node.EventType.TOUCH_END, this.onBtnReturn, this);\n        this.enterRoomButton.node.on(cc.Node.EventType.TOUCH_END, this.onBtnEnterRoom, this);\n        G.ws.on(\"message\", this.onWsHallMessage, this);\n        // G.ws.on(\"hall\", this.onWsHallInfo, this);\n        G.ws.on(\"create\", this.onWsCreateRoom, this);\n        G.ws.on(\"enter\", this.onWsEnterRoom, this);\n        G.ws.on(\"error\", this.onWsError, this);\n    }\n\n    removeListeners() {\n        G.ws.offTarget(this);\n    }\n\n}\n"]}