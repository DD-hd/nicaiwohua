{"version":3,"sources":["assets\\src\\scenes\\share\\Sketchpad.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class Sketchpad extends cc.Component {\n\n    public isDrawing:boolean = false;\n    @property(cc.Node)\n    private pen: cc.Node = null;\n    @property(cc.Graphics)\n    private g: cc.Graphics = null;\n\n    public path: Array<{p:cc.Vec2,isStart:boolean}> = [];\n\n    public setLineWidth(w:number) {\n        this.g.lineWidth = w;\n        this.g.lineCap = cc.Graphics.LineCap.ROUND;\n        this.g.lineJoin = cc.Graphics.LineJoin.ROUND;\n    }\n\n    public getLineWidth():number{\n        return this.g.lineWidth;\n    }\n\n    public setPenColor(hex:string) {\n        this.g.strokeColor = cc.hexToColor(hex);\n        this.g.lineCap = cc.Graphics.LineCap.ROUND;\n        this.g.lineJoin = cc.Graphics.LineJoin.ROUND;\n    }\n\n    public getPenColor():string {\n        return \"#\"+this.g.strokeColor.toHEX(\"#rrggbb\");\n    }\n\n\n    public enableDraw() {\n        this.node.parent.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        this.node.parent.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.node.parent.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\n        this.isDrawing = true;\n        this.pen.active = true;\n        this.g.lineWidth = 10;\n        this.g.strokeColor = cc.Color.BLACK;\n        this.g.lineCap = cc.Graphics.LineCap.ROUND;\n        this.g.lineJoin = cc.Graphics.LineJoin.ROUND;\n    }\n\n    public disableDraw() {\n        this.node.parent.off(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        this.node.parent.off(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.node.parent.off(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this);\n        this.isDrawing = false;\n        this.pen.active = false;\n        this.g.lineWidth = 10;\n        this.g.strokeColor = cc.Color.BLACK;\n        this.g.lineCap = cc.Graphics.LineCap.ROUND;\n        this.g.lineJoin = cc.Graphics.LineJoin.ROUND;\n    }\n\n    public clear() {\n        let width = this.g.lineWidth;\n        let color = this.g.strokeColor;\n        this.g.clear();\n        this.g.lineCap = cc.Graphics.LineCap.ROUND;\n        this.g.lineJoin = cc.Graphics.LineJoin.ROUND;\n        this.g.lineWidth = width;\n        this.g.strokeColor = color;\n    }\n\n    public savePoint(p:cc.Vec2,isStart:boolean) {\n        this.path.push({p:p,isStart:isStart});\n    }\n\n    public popPath():Array<{p:cc.Vec2,isStart:boolean}> {\n        let path = this.path.slice();\n        this.path = [];\n        return path;\n    }\n\n    public drawByPath(path: Array<{p:cc.Vec2,isStart:boolean}>) {\n        for (let i = 0; i < path.length; i++) {\n            let {p,isStart} = path[i];\n            if(isStart) {\n                this.g.moveTo(p.x,p.y);\n            }else{\n                this.g.lineTo(p.x, p.y)\n                this.g.stroke();\n                this.g.moveTo(p.x,p.y);\n            }\n            \n        }\n    }\n\n    private onTouchStart(e: cc.Event.EventTouch) {\n        let localPosition = this.node.convertToNodeSpaceAR(cc.v2(e.getLocation()));\n        this.pen.active = true;\n        this.pen.position = localPosition;\n        this.g.moveTo(localPosition.x, localPosition.y);\n        this.savePoint(cc.v2(localPosition.x, localPosition.y),true);\n    }\n\n    private onTouchMove(e: cc.Event.EventTouch) {\n        let localPosition = this.node.convertToNodeSpaceAR(cc.v2(e.getLocation()));\n        this.pen.position = localPosition;\n        this.g.lineTo(localPosition.x, localPosition.y);\n        this.g.stroke();\n        this.g.moveTo(localPosition.x, localPosition.y);\n        this.savePoint(cc.v2(localPosition.x,localPosition.y),false);\n    }\n\n    private onTouchEnd(e: cc.Event.EventTouch) {\n        this.pen.active = false;\n    }\n\n    private onTouchCancel(e: cc.Event.EventTouch) {\n        this.pen.active = false;\n    }\n}"]}